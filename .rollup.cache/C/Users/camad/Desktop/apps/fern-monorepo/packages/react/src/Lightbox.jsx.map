{"version":3,"file":"Lightbox.jsx","sourceRoot":"","sources":["Lightbox.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport Modal from './Modal'\r\nimport Media from './Media'\r\nimport Link from './Link'\r\nimport { cn, closeModal, useListener } from './_util'\r\nimport { angle, close } from './_icons'\r\n\r\ninterface Props {\r\n  id?: string\r\n  sources: string[],\r\n  className?: string\r\n  bgClass?: string\r\n  customOverlay?: any\r\n  overlayClass?: string\r\n  controlClass?: string\r\n  iconClass?: string\r\n}\r\n\r\nexport default function Lightbox({\r\n  id,\r\n  sources,\r\n  className,\r\n  bgClass,\r\n  customOverlay,\r\n  overlayClass,\r\n  controlClass,\r\n  iconClass\r\n}: Props) {\r\n  const [current, setCurrent] = useState(0)\r\n\r\n  const cyclePrevious = () =>\r\n    setCurrent(curr => curr > 0 ? curr - 1 : sources.length - 1)\r\n\r\n  const cycleNext = () =>\r\n    setCurrent(curr => curr < sources.length - 1 ? curr + 1 : 0)\r\n\r\n  const onOpen = (e: any) =>\r\n    e.detail?.index && setCurrent(e.detail?.index)\r\n\r\n  useListener('keydown', (e: any) => {\r\n    if (e.repeat)\r\n      return\r\n\r\n    const key = e?.key?.toLowerCase()\r\n\r\n    if (key === 'arrowleft' || key === 'a')\r\n      cyclePrevious()\r\n    else if (key === 'arrowright' || key === 'd')\r\n      cycleNext()\r\n  })\r\n\r\n  return (\r\n    <Modal\r\n      id={id}\r\n      className={cn('fui-lightbox', className)}\r\n      style={modalStyle}\r\n      onAction={onOpen}\r\n      bgClass={cn('fui-lightbox-bg', bgClass)}\r\n      scrollLock\r\n      focus\r\n    >\r\n      <div style={innerStyle as Object}>\r\n        {current >= 0 && sources.map((source, i) => \r\n          <Media\r\n            src={source}\r\n            className={cn('fui-lightbox-item', 'fui-lightbox-item-' + (current === i ? 'active' : 'inactive'))}\r\n            cover\r\n            priority\r\n            key={i}\r\n          />\r\n        )}\r\n        {customOverlay || (\r\n          <div className={cn('fui-lightbox-overlay', overlayClass)} style={{ position: 'absolute '} as Object}>\r\n            <Link\r\n              label='Close image'\r\n              onClick={closeModal}\r\n              className={cn('fui-lightbox-control', controlClass)}\r\n              style={{ ...controlStyle, ...closeStyle }}\r\n              icon={close}\r\n              iconClass={cn('fui-lightbox-icon', iconClass)}\r\n            />\r\n            <Link\r\n              label='Previous image'\r\n              onClick={cyclePrevious}\r\n              className={cn('fui-lightbox-control', controlClass)}\r\n              style={{ ...controlStyle, ...previousStyle }}\r\n              icon={angle}\r\n              iconClass={cn('fui-lightbox-icon', iconClass)}\r\n            />\r\n            <Link\r\n              label='Next image'\r\n              onClick={cycleNext}\r\n              className={cn('fui-lightbox-control', controlClass)}\r\n              style={{ ...controlStyle, ...nextStyle }}\r\n              icon={angle}\r\n              iconClass={cn('fui-lightbox-icon', iconClass)}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nconst modalStyle = {\r\n  top: '0',\r\n  bottom: '0',\r\n  left: '0',\r\n  right: '0',\r\n  margin: 'auto',\r\n}\r\n\r\nconst innerStyle = {\r\n  position: 'relative',\r\n  width: '100%',\r\n  height: '100%',\r\n}\r\n\r\nconst controlStyle = {\r\n  position: 'absolute',\r\n  zIndex: '20',\r\n}\r\n\r\nconst closeStyle = {\r\n  top: '0',\r\n  right: '0',\r\n}\r\n\r\nconst previousStyle = {\r\n  top: '50%',\r\n  left: '0',\r\n  transform: 'translateY(-50%) rotate(90deg)',\r\n}\r\n\r\nconst nextStyle = {\r\n  top: '50%',\r\n  right: '0',\r\n  transform: 'translateY(-50%) rotate(-90deg)',\r\n}"]}