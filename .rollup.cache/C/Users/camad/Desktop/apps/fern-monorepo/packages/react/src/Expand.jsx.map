{"version":3,"file":"Expand.jsx","sourceRoot":"","sources":["Expand.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAA;AAC1D,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,SAAS,CAAA;AAWzC,MAAM,CAAC,OAAO,UAAU,MAAM,CAAC,EAC7B,QAAQ,EACR,EAAE,EACF,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,WAAW,EACL;IACN,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAA;IAC3C,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA;IACrD,MAAM,SAAS,GAAG,QAAQ,IAAI,MAAM,EAAE,CAAA;IAEtC,MAAM,eAAe,GAAG,GAAG,EAAE,CAC3B,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,CAAA;IAEvE,SAAS,CAAC,eAAe,EAAE,EAAE,CAAC,CAAA;IAC9B,WAAW,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAA;IAEtC,WAAW,CAAC,SAAS,EAAE,CAAC,CAAM,EAAE,EAAE;QAChC,IAAI,WAAW,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;YACtD,SAAS,CAAC,KAAK,CAAC,CAAA;IACpB,CAAC,CAAC,CAAA;IAEF,WAAW,CAAC,kBAAkB,EAAE,CAAC,CAAM,EAAE,EAAE;QACzC,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAA;QAC9B,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAA;QACxC,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAA;IACzB,CAAC,EAAE,SAAS,CAAC,CAAA;IAEb,OAAO,CACL,CAAC,GAAG,CACF,GAAG,CAAC,CAAC,SAAS,CAAC,CACf,EAAE,CAAC,CAAC,EAAE,CAAC,CACP,SAAS,CAAC,CAAC,EAAE,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC,CACpD,KAAK,CAAC,CAAC,WAAW,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,CAC1C,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAElC;MAAA,CAAC,GAAG,CACF;QAAA,CAAC,QAAQ,CACX;MAAA,EAAE,GAAG,CACP;IAAA,EAAE,GAAG,CAAC,CACP,CAAA;AACH,CAAC;AAED,MAAM,WAAW,GAAG,CAAC,MAAe,EAAE,aAAqB,EAAE,EAAE,CAAC,CAAC;IAC/D,QAAQ,EAAE,QAAQ;IAClB,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAC5C,kBAAkB,EAAE,YAAY;CACjC,CAAC,CAAA","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport { cn, useListener } from './_util'\r\n\r\ninterface Props {\r\n  innerRef?: any\r\n  id?: string\r\n  className?: string\r\n  children?: any\r\n  onAction?: Function\r\n  exitOnClick?: Function\r\n}\r\n\r\nexport default function Expand({\r\n  innerRef,\r\n  id,\r\n  className,\r\n  children,\r\n  onAction,\r\n  exitOnClick\r\n}: Props) {\r\n  const [active, setActive] = useState(false)\r\n  const [contentHeight, setContentHeight] = useState(0)\r\n  const expandRef = innerRef || useRef()\r\n\r\n  const setExpandHeight = () =>\r\n    setContentHeight(expandRef.current.querySelector('div').clientHeight)\r\n\r\n  useEffect(setExpandHeight, [])\r\n  useListener('resize', setExpandHeight)\r\n\r\n  useListener('mouseup', (e: any) => {\r\n    if (exitOnClick && !expandRef.current.contains(e.target))\r\n      setActive(false)\r\n  })\r\n\r\n  useListener('FernExpandAction', (e: any) => {\r\n    const action = e.detail.action\r\n    setActive(action < 2 ? action : !active)\r\n    onAction && onAction(e)\r\n  }, expandRef)\r\n\r\n  return (\r\n    <div\r\n      ref={expandRef}\r\n      id={id}\r\n      className={cn('fui-listener fui-expand', className)}\r\n      style={expandStyle(active, contentHeight)}\r\n      tabIndex={active ? undefined : -1}\r\n    >\r\n      <div>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst expandStyle = (active: boolean, contentHeight: number) => ({\r\n  overflow: 'hidden',\r\n  maxHeight: active ? contentHeight + 'px' : 0,\r\n  transitionProperty: 'max-height',\r\n})"]}